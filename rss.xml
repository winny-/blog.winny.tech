<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0">
<channel>
<title><![CDATA[blog.winny.tech]]></title>
<description><![CDATA[blog.winny.tech]]></description>
<link>https://blog.winny.tech/</link>
<lastBuildDate>Fri, 03 Jan 2020 22:08:42 -0600</lastBuildDate>
<item>
  <title><![CDATA[How to fix early framebuffer problems, or "Can I type my disk password yet??"]]></title>
  <description><![CDATA[
<p>
Most of my workstations &amp; laptops require a passphrase typed in to
open the encrypted root filesystem. So my steps to booting are as
follows:
</p>

<ol class="org-ol">
<li>Power on machine</li>
<li>Wait for FDE passphrase prompt</li>
<li>Type in FDE passphrase</li>
<li>Wait for boot to complete and automatic XFCE session to start</li>
</ol>

<p>
Since I need to know when the computer is ready to accept the
passphrase, it is important the framebuffer is usable during the early
part of the boot. In the case of of HP Elitebook 820 G4, the EFI
framebuffer does not appear to work, and I rather not boot in BIOS
mode to get a functional VESA framebuffer. Making things more awkward,
a firmware is needed when the i915 driver is loaded, or the
framebuffer will not work either. (It&rsquo;s not always clear if a firmware
is needed, so one should run <code>dmesg | grep -F firmware</code> and check if
firmware is being loaded.)
</p>

<p>
With this information, the problem is summarized to: <b>&ldquo;How do I ensure
i915 is available at boot with the appropriate firmware?&rdquo;</b>. This
question can be easily generalized to any framebuffer driver, as the
steps are more-or-less the same.
</p>

<div id="outline-container-org60590c1" class="outline-2">
<h2 id="org60590c1">Zeroth step: Do you need only a driver, or a driver with firmware?</h2>
<div class="outline-text-2" id="text-org60590c1">
<p>
IT is a good idea to verify if your kernel is missing a driver at
boot, or is missing firmware or both. Boot up a Live USB with good
hardware compatibility, such as <a href="http://grml.org/">GRML</a><sup><a id="fnr.1" class="footref" href="#fn.1">1</a></sup> or Ubuntu&rsquo;s, and let&rsquo;s see what
framebuffer driver our host is trying to use<sup><a id="fnr.2" class="footref" href="#fn.2">2</a></sup>:
</p>

<pre class="example">
$ dmesg | grep -i 'frame.*buffer'
[    4.790570] efifb: framebuffer at 0xe0000000, using 8128k, total 8128k
[    4.790611] fb0: EFI VGA frame buffer device
[    4.820637] Console: switching to colour frame buffer device 240x67
[    6.643895] i915 0000:00:02.0: fb1: i915drmfb frame buffer device
</pre>

<p>
Se we can see the efifb is initially used for a couple seconds, then
i915 is used for the rest of the computer&rsquo;s uptime. Now let&rsquo;s look
at if firmware is necessary, first checking if <code>modinfo(8)</code> knows of
any firmware:
</p>

<pre class="example">
$ modinfo i915 -F firmware
i915/bxt_dmc_ver1_07.bin
i915/skl_dmc_ver1_27.bin
i915/kbl_dmc_ver1_04.bin
... SNIP ...
i915/kbl_guc_33.0.0.bin
i915/icl_huc_ver8_4_3238.bin
i915/icl_guc_33.0.0.bin
</pre>

<p>
This indicates this driver will load firmware when available, and if
necessary for the particular mode of operation or hardware.
</p>

<p>
Now let&rsquo;s look at dmesg to see if any firmware is loaded:
</p>

<pre class="example">
[    0.222906] Spectre V2 : Enabling Restricted Speculation for firmware calls
[    5.511731] [drm] Finished loading DMC firmware i915/kbl_dmc_ver1_04.bin (v1.4)
[   25.579703] iwlwifi 0000:02:00.0: loaded firmware version 36.77d01142.0 op_mode iwlmvm
[   25.612759] Bluetooth: hci0: Minimum firmware build 1 week 10 2014
[   25.620251] Bluetooth: hci0: Found device firmware: intel/ibt-12-16.sfi
[   25.712793] iwlwifi 0000:02:00.0: Allocated 0x00400000 bytes for firmware monitor.
[   27.042080] Bluetooth: hci0: Waiting for firmware download to complete
</pre>

<p>
Aha! So it appears we need <code>i915/kbl_dmc_ver1_04.bin</code> for i915. In
the case case one doesn&rsquo;t need firmware, it won&rsquo;t show anything
related to <code>drm</code> or a line with your driver name in it.
</p>

<p>
By the way, it is a good idea to check dmesg for hints about missing
firmware, or alternative drivers, for example my trackpad is
supported by both i2c and synaptics based trackpad drivers, and the
kernel was kind enough to tell me.
</p>
</div>
</div>

<div id="outline-container-org47d680f" class="outline-2">
<h2 id="org47d680f">First step: Obtain the firmware</h2>
<div class="outline-text-2" id="text-org47d680f">
<p>
On Gentoo install
<code>sys-kernel/linux-firmware</code>. You will have to agree to some non-free
licenses; nothing too inane, but worth mentioning. Now just
run <code>emerge -av sys-kernel/linux-firmware</code>. (On other distros it
might be this easy, or more difficult; for exampleâ€”in my experience
Debian does not ship every single firmware like Gentoo does, so
YMMV.)
</p>
</div>
</div>

<div id="outline-container-org2133291" class="outline-2">
<h2 id="org2133291">Second step, Option A: Compile firmware into your kernel</h2>
<div class="outline-text-2" id="text-org2133291">
<p>
Since most of my systems run Gentoo, it is business as usual to
deploy a kernel with most excess drivers disabled except for common
hot-swappable components such as USB network interfaces, audio
devices, and so on. For example, this laptop&rsquo;s config was originally
derived from genkernel&rsquo; stock amd64 config with most extra drivers
disabled, then augmented with support for an Acer ES1-111M-C7DE,
and finally with support for this Elitebook.
</p>

<p>
I had compiled the kernel with i915 support built into the image, as
opposed to an additional kernel module. Unfortunately this meant the
kernel is unable to load firmware from filesystem, because it
appears only kernel modules can load firmware from filesystem. To
work around this without resorting to making i915 a kernel module,
we can include the drivers within the kernel image (<code>vmlinuz</code>).
Including firmware and drivers both in the vmlinuz has a couple
benefits. First it will always be available. There is no need to
figure out how to load the driver and firmware from initrd, let
alone getting the initrd generator one is using, to cooperate. A
downside is it makes the kernel very specific to the machine,
because perhaps a different Intel machine needs a different firmware
file compiled in.
</p>

<p>
To achieve including the firmware in kernel, I set the following
values in my kernel config (<code>.config</code> in your kernel source tree).
</p>

<pre class="example">
CONFIG_EXTRA_FIRMWARE="i915/kbl_dmc_ver1_04.bin"
CONFIG_EXTRA_FIRMWARE_DIR="/lib/firmware"
</pre>

<p>
Note, if you&rsquo;re using menuconfig, you can type <code>/EXTRA_FIRMWARE</code>
(slash for search, then the text) followed by keyboard return to
find where these settings exist in the menu system.
</p>

<p>
Then I verified i915 is indeed not a kernel module, but built into
the kernel image (it would be <code>m</code> if it&rsquo;s a module):
</p>

<pre class="example">
CONFIG_DRM_I915=y
</pre>

<p>
After compiling &amp; installing the kernel (and generating a dracut
initrd for cryptsetup/lvm), I was able to reboot and get an early
pre-mounted-root framebuffer on this device.
</p>
</div>
</div>

<div id="outline-container-orgccaf77f" class="outline-2">
<h2 id="orgccaf77f">Second step, Option B: A portable kernel approach (using <code>sys-kernel/vanilla-kernel</code>)</h2>
<div class="outline-text-2" id="text-orgccaf77f">
<p>
I discovered the Gentoo devs <a href="https://blogs.gentoo.org/mgorny/2019/12/19/a-distribution-kernel-for-gentoo/">have begun shipping an ebuild that
builds and installs a kernel with a portable, livecd friendly
config</a>. In addition this package will optionally generates an initrd
with dracut as a pkg<sub>postinst</sub> step, making it very suitable as a
replacement for users who just want a working kernel, and don&rsquo;t mind
a excessive compatibility (at a cost to size and build time).
</p>

<p>
This presents a different challenge, because while this package does
allow the user to drop in their own .config, it is not very
multiple-machine-deployment friendly to hard-code each individual
firmware into the kernel. Instead we tell dracut to include our
framebuffer driver. As mentioned above I found this computer uses
the <code>i915</code> kernel driver for framebuffer. Let&rsquo;s tell dracut to
include the driver:
</p>

<pre class="example">
cat &gt; /etc/dracut.conf.d/i915.conf &lt;&lt;EOF
add_drivers+=" i915 "
EOF
</pre>

<p>
Dracut is smart enough to pick up the firmware the kernel module
needs, provided they are installed. To get an idea what firmware
dracut will include, run <code>modinfo i915 -F firmware</code> which will print
out a bunch of firmware relative paths.
</p>

<p>
After applying this fix, just regenerate your initrd using dracut; in
my case I let portage do the work:
<code>emerge -1av sys-kernel/vanilla-kernel</code>. Finally reboot.
</p>
</div>
</div>

<div id="outline-container-org89b02d2" class="outline-2">
<h2 id="org89b02d2">Conclusion</h2>
<div class="outline-text-2" id="text-org89b02d2">
<p>
Check dmesg. Always check dmesg. We found two ways to deploy
firmware, in-kernel and in-initrd. The in-kernel technique is best
for a device-specific kernel, the in-initrd is best for a portable
kernel. I am a big fan of the second technique because it scales
well to many machines.
</p>

<p>
I did not touch on the political side of using binary blobs. It
would be nice to not use any non-free software, but I rather have a
working system with a couple small non-free components, than a
non-working system. Which is more valuable, your freedom, or reduced
capacity of your tools?
</p>
</div>
</div>
<div id="footnotes">
<h2 class="footnotes">Footnotes: </h2>
<div id="text-footnotes">

<div class="footdef"><sup><a id="fn.1" class="footnum" href="#fnr.1">1</a></sup> <div class="footpara"><p class="footpara">
GRML is my favorite live media. It is simple, to the point, has
lots of little scripts to streamline tasks such as setting up a
wireless AP, a iPXE netboot environment, a router, installing debian,
and so on. And Remastering is relatively straight forward. It also has
a sane gui sutable for any machine (fluxbox).
</p></div></div>

<div class="footdef"><sup><a id="fn.2" class="footnum" href="#fnr.2">2</a></sup> <div class="footpara"><p class="footpara">
Thanks to <a href="https://askubuntu.com/questions/727577/how-to-check-if-framebuffer-is-enabled">this post</a> on Ask Ubuntu
</p></div></div>


</div>
</div><div class="taglist"><a href="tags.html">Tags</a>: <a href="tag-gentoo.html">gentoo</a> <a href="tag-linux.html">linux</a> <a href="tag-computing.html">computing</a> </div>]]></description>
  <category><![CDATA[gentoo]]></category>
  <category><![CDATA[linux]]></category>
  <category><![CDATA[computing]]></category>
  <link>https://blog.winny.tech/2019-12-25-how-to-fix-early-framebuffer-problems,-or-can-i-type-my-disk-password-yet.html</link>
  <pubDate>Wed, 25 Dec 2019 03:37:00 -0600</pubDate>
</item>
<item>
  <title><![CDATA[Milwaukee Code Camp]]></title>
  <description><![CDATA[
<p>
This most recent weekend (November 16th) I attended the <a href="https://www.milwaukeecodecamp.com/">Milwaukee Code
Camp</a> and was pleased with the content. There was plenty of food,
coffee, and give-aways.
</p>

<div id="outline-container-orga8ba07b" class="outline-2">
<h2 id="orga8ba07b">The Talks</h2>
<div class="outline-text-2" id="text-orga8ba07b">
<p>
I attended five talks:
</p>

<ol class="org-ol">
<li>starting an open source project (<a href="https://www.milwaukeecodecamp.com/session/details/1217">link</a>) <sup><a id="fnr.1" class="footref" href="#fn.1">1</a></sup>,</li>
<li>how to manage work life balance as a software developer (<a href="https://www.milwaukeecodecamp.com/session/details/1210">link</a>),</li>
<li>getting started with <a href="https://docs.docker.com/engine/docker-overview/">Docker</a> and <a href="https://kubernetes.io">Kubernetes</a><sup><a id="fnr.2" class="footref" href="#fn.2">2</a></sup> (<a href="https://www.milwaukeecodecamp.com/session/details/1212">link</a>),</li>
<li>introduction to <a href="https://www.terraform.io/">Terraform</a> for cloud infrastructure management (<a href="https://www.milwaukeecodecamp.com/Session/Details/1205">link</a>),</li>
<li>and accessibility (a11y) on the modern web (<a href="https://www.milwaukeecodecamp.com/session/details/1234">link</a>).</li>
</ol>

<p>
I am pleased to say the open source fellow recommended GPLv3, MIT/X,
and Apache 2.0 (and <a href="https://choosealicense.com/">choosealicense.com</a>), so I have a lot of respect
for him. I think a lesser open source evangelist would recommend one
license, or strongly recommend one license. It really does depend on
your project.
</p>

<p>
I was able to get <a href="https://github.com/kubernetes/minikube">Minikube</a> set up during the Docker/k8s talk in five
minutes. No surprises when installing it from the official Gentoo
repository. Just follow the installed readme, run the commandsâ€¦ it's
really quite easy to do. A friend commented it wasn't so simple on
their system to install Minikube and get it working.
</p>

<p>
While I don't think I would use Terraform at this point, I have a
good appreciation for when I might use it in the future. In
addition, I found a <a href="https://github.com/dmacvicar/terraform-provider-libvirt">Terraform provider for libvirt</a>, so one could in
theory provision their own cloud infrastructure on a simple libvirt
cluster with Terraform. I believe this might be my first use-case
for Terraform.
</p>

<p>
It was refreshing to see people talking about accessibility and the
web. I am personally not a fan of the web stack for various
reasons.<sup><a id="fnr.3" class="footref" href="#fn.3">3</a></sup> But the reality is the technology won't go away, and the
browser is the greatest common denominator both reaching users and
simplifying the a project's platform support matrix. It was great to
hear from somebody in industry "your website should be <b>somewhat</b>
usable without javascript". I am really pleased to hear this; perhaps
there is hope for the web ecosystem yet.
</p>
</div>
</div>

<div id="outline-container-org79f345b" class="outline-2">
<h2 id="org79f345b">The Food</h2>
<div class="outline-text-2" id="text-org79f345b">
<p>
Sweet pastries, water, soda, coffee were available in the
morning ad throughout the day. There may have been more
comprehensive breakfast items (cereal?), though I was late for the
first session. Lunch was Dominos pizza and brownies. There was no
shortage of pizza. The coffee was catered from Panera Bread.
</p>
</div>
</div>

<div id="outline-container-orgffcdc5f" class="outline-2">
<h2 id="orgffcdc5f">Conclusion</h2>
<div class="outline-text-2" id="text-orgffcdc5f">
<p>
In addition to learning about Terraform, Kubernetes, and
accessibility, I met a lot of cool people. I think this event was an
overwhelming success. Thanks to everybody who organized this event.
</p>
</div>
</div>
<div id="footnotes">
<h2 class="footnotes">Footnotes: </h2>
<div id="text-footnotes">

<div class="footdef"><sup><a id="fn.1" class="footnum" href="#fnr.1">1</a></sup> <div class="footpara"><p class="footpara">
Slides <a href="https://github.com/NickSchweitzer/Presentations">here</a>.
</p></div></div>

<div class="footdef"><sup><a id="fn.2" class="footnum" href="#fnr.2">2</a></sup> <div class="footpara"><p class="footpara">
See the example Docker-ized and Kubernetes-ized application on
BitBucket <a href="https://bitbucket.org/Bolbeck/mkecodecampnodemysql/src/master/">here</a>.
</p></div></div>

<div class="footdef"><sup><a id="fn.3" class="footnum" href="#fnr.3">3</a></sup> <div class="footpara"><p class="footpara">
This is a discussion in itself. For example: I think a large
majority of the user and developer experience with web technologies
does not adhere to the <a href="https://en.wikipedia.org/wiki/Principle_of_least_astonishment">principle of least surprise</a>, making it very
frustrating for everyone involved.
</p></div></div>


</div>
</div><div class="taglist"><a href="tags.html">Tags</a>: <a href="tag-community.html">community</a> </div>]]></description>
  <category><![CDATA[community]]></category>
  <link>https://blog.winny.tech/2019-11-23-milwaukee-code-camp.html</link>
  <pubDate>Sat, 23 Nov 2019 20:24:00 -0600</pubDate>
</item>
<item>
  <title><![CDATA[Won MSOE x Google Cloud Hackathon]]></title>
  <description><![CDATA[
<p>
About a fortnight ago (Nov 9th) I went to the MSOE x Google Cloud
hackathon.<sup><a id="fnr.1" class="footref" href="#fn.1">1</a></sup> There was pizza, soda, and Google Cloud gear. Each group
was given a <a href="https://aiyprojects.withgoogle.com/vision">Google AIY Computer Vision kit</a> to assemble, and build a
proof of concept around.
</p>

<p>
The kit contained a <a href="https://www.adafruit.com/product/3400">Raspberry Pi Zero W</a>, the <a href="https://www.adafruit.com/product/3099">Raspberry Pi Camera
Add-on</a>, a breakout board to provide simplified pin-outs for a button
with an integrated light, an additional LED that mounted next to the
camera to indicate if the camera was active, and a piezo buzzer.<sup><a id="fnr.2" class="footref" href="#fn.2">2</a></sup> All
these components fit into a carefully engineered cardboard box that
folded onto itself, held together with adhesive tape. The assembled
device was remarkably robust and easy to operate.
</p>

<div id="outline-container-org1bb9d1d" class="outline-2">
<h2 id="org1bb9d1d">Challenges</h2>
<div class="outline-text-2" id="text-org1bb9d1d">
<p>
We were among the first group to finish building the kit. It turned
out the software on the included SD card was not exactly what we
needed, and the SD card writing software for Windows (<a href="https://etcher.io/">Etcher</a>) was a
bit unreliable and did not clearly indicate to the user of a
successful write. After a second attempt we had bootable SD card.
</p>

<p>
The system took a couple minutes to boot and resize itself. Mind
you, we did not have a Mini-HDMI to HDMI cable, nor a monitor to
output the Raspberry Pi display. Thus we had to wait, chat, and eat
pizza.
</p>

<p>
The next challenge was to &ldquo;pair&rdquo; the device with a wifi network so
one could SSH into it. There is an android app for this, and at
first we paired it with a spare android device acting as a
hotspot. Unfortunately this configuration did not give us internet
access when connected to this wireless access point. We were able to
verify the device was working, SSH in, and inspect the images we
took via the kit&rsquo;s included camera.
</p>

<p>
We moved to a more central location, as the most cognitively
demanding part was complete &#x2014; construction of the device, and
ensuring it works. This lead to more networking challenge. We wanted
a way to network this device to the internet so we could not only
log into it via SSH, but access PyPi from the device, and access
StackOverflow from our laptops on the same network. With a little
brainstroming we came up with this network topology:
</p>


<figure>
<img src="static/image/msoe-network-topology.png" alt="msoe-network-topology.png">

</figure>

<p>
Yes, as you can see the path from the internet is (A) public wifi
(B) my friend Karl&rsquo;s android phone (C) his laptop via bluetooth
tethering (D) finally a wifi network via his laptop&rsquo;s built in
wifi. We had an intemittent hiccup with nameserver configuration not
set up correctly on the host wifi network â€” as such any DNS would
not resolve. A quick tweak to Karl&rsquo;s network manager settings
mitigated this. And like thatâ€¦ we were networked together on a
private wifi network complete with internet access.
</p>

<p>
There were some other techincal issues. Because of our network
topology, the round trip time to the internet was very high,
occasionally over a second from the pi, and pip has a relatively low
timeout when installing stuff. The workaround was to <a href="https://stackoverflow.com/questions/43298872/">tell pip to
calm down, and be patient</a>. I had installed tmux so we could share a
session across the table (for pair programming), and the apt man-db
triggers <a href="https://askubuntu.com/a/1064366/436920">took around 5-15 minutes</a>; with the crunch time we had, this
felt unacceptable. The other technical issue we had was the fact the
raspbian image starts up a lot of unnecessary services by default
which eat into the rasperry pi zero w&rsquo;s very limited memory. This
caused pip to crash due to failure to allocate memory. We had to
disable lightdm (GUI) and the default vision kit demo. Had this been
a device I&rsquo;d use for more than a couple hours, I&rsquo;d go through and
disable things like GIO services, and other bloat that we never
would use.<sup><a id="fnr.3" class="footref" href="#fn.3">3</a></sup>
</p>

<p>
Meanwhile our other two group members worked on a proof of concept
game. The idea the device comes up with a common word, and the user
carries the device around, showing it various text on the wall or on
paper. Using a cloud <a href="https://en.wikipedia.org/wiki/Optical_character_recognition">OCR</a> service, it can recognize the
words seen by the camera. It then will buzz happily when it is shown
the correct word, or buzz sadly if shown the wrong word. Then the
process repeats. It&rsquo;s an &ldquo;iSpy&rdquo; with computer vision and words â€” a
word hunt!
</p>
</div>
</div>

<div id="outline-container-org3800e07" class="outline-2">
<h2 id="org3800e07">Completion</h2>
<div class="outline-text-2" id="text-org3800e07">
<p>
While our PoC was not deployed in time for presentations, we were
about five to ten minutes away from setting it up, and demoing
it. During the presentations, we found that many of the other groups
experienced the same issues with the Google AIY Vision Kit â€” due to
the Raspberry Pi platform, Raspbian, and the way one pairs it to
wifi. At least one other group managed to get some non-default code
running on their Pi. We were only given around 3-4 hours from start
to finish, with a time loss factor due to slow internet speeds to
download the initial SD card image, man-db triggers rendering the
device unusable for awhile, and dealing with the lack of suitable
networking configuration.
</p>

<p>
Given all these challenges, I think we did very well. As did every
other group that participated. We did have competition for 1st
place, because some of the other groups had PoC&rsquo;s (though some did
not get the Pi completely working) and others did get the Pi working
but did not have a PoC. We were selected as 1st place, and each was
given either a <a href="https://store.google.com/product/google_home_mini">Google Home Mini</a> or a Google Cloud hoodie. I went
with the hoodie because I don&rsquo;t want to use Google&rsquo;s <a href="https://support.google.com/googlenest/answer/7072285?hl=en">creepy</a> <a href="https://www.youtube.com/watch?v=AAP4N3KyLmM">spyware</a>
voice assistant. And the modding/reverse engineering community has
done very little with this product; nobody has loaded custom
firmware on it, for example.
</p>
</div>
</div>

<div id="outline-container-org38ca3b4" class="outline-2">
<h2 id="org38ca3b4">Conclusion</h2>
<div class="outline-text-2" id="text-org38ca3b4">
<p>
Our issue in seeking out a usable networking topology had be thinking:
if I simply had a device with two wifi radios, I could run one as an
Acesss Point and the other connected to Public WiFi. This device would
then yield this topology, which would be ideal for these sorts of
impromptu projects and activities:
</p>


<figure>
<img src="static/dual-wifi.png" alt="dual-wifi.png">

</figure>

<p>
In addition, it would be perfect for demonstrations of man in the
middle attacks on public wifi, or experimenting with multipath tcp and
wifi.
</p>

<p>
With these sorts of events that start early on a Saturday morning,
it&rsquo;s been useful to agree with a friend to attend the same event. That
way both parties are more likely to show up, because it wouldn&rsquo;t be
very personable to cancel last minute. We also had a wonderful team. I
later met up with most of the same team for another event (post
incoming). Hackathons are a great way to meet new people. I enjoyed
this event thoroughly.
</p>

<p>
See you at the next hackathon :)
</p>
</div>
</div>
<div id="footnotes">
<h2 class="footnotes">Footnotes: </h2>
<div id="text-footnotes">

<div class="footdef"><sup><a id="fn.1" class="footnum" href="#fnr.1">1</a></sup> <div class="footpara"><p class="footpara">
There isn&rsquo;t a link online yet :(. I will update this note when
I find <b>a link</b> to the event.
</p></div></div>

<div class="footdef"><sup><a id="fn.2" class="footnum" href="#fnr.2">2</a></sup> <div class="footpara"><p class="footpara">
Full list of materials <a href="https://aiyprojects.withgoogle.com/vision#list-of-materials">here</a>.
</p></div></div>

<div class="footdef"><sup><a id="fn.3" class="footnum" href="#fnr.3">3</a></sup> <div class="footpara"><p class="footpara">
Stay tuned as I explore why I find distros like Debian not
ideal in practice in a future post â˜º
</p></div></div>


</div>
</div><div class="taglist"><a href="tags.html">Tags</a>: <a href="tag-community.html">community</a> </div>]]></description>
  <category><![CDATA[community]]></category>
  <link>https://blog.winny.tech/2019-11-18-won-msoe-x-google-cloud-hackathon.html</link>
  <pubDate>Mon, 18 Nov 2019 20:49:00 -0600</pubDate>
</item>
<item>
  <title><![CDATA[GDG Milwaukee 2019 DevFest - We participated!]]></title>
  <description><![CDATA[
<p>
I attended the <a href="https://www.meetup.com/GDG-UWM/events/264945191/">GDG Milwaukee 2019 DevFest</a> last Saturday. This was my
second hackathon. Around 6-9 teams participated. We coded for six
hours, and I learned a lot about team dynamics. We formed a team of eight
participants. We encountered a couple significant challenges.
</p>

<div id="outline-container-orga29e78d" class="outline-2">
<h2 id="orga29e78d">The stack matters</h2>
<div class="outline-text-2" id="text-orga29e78d">
<p>
Initially we decided to use Python and the <a href="https://www.djangoproject.com/">Django framework</a>. This
turned out to be a grave error, because picking up Django quickly
while staying productive is challenging. This challenge is
multiplied by unfamiliarity with <a href="https://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller">MVC</a>/<a href="https://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93presenter">MVP</a> web frameworks.
</p>

<p>
A couple hours in we sat down and decided Django had to go. We
realized two of us had prior experience with <a href="https://palletsprojects.com/p/flask/">Flask</a>. Combined with
<a href="https://www.flaskapi.org/">flaskapi</a> this could be a wonderfully simple way to build a RESTful
API backend.
</p>

<p>
For the frontend we used <a href="https://create-react-app.dev/">Create React App</a>. I did not work with it
much, but I found it easy to run, deploy, and tweak. I think it was
a solid choice.
</p>

<p>
The hardest part of our stack was integrating our hand-rolled RESTful
API into the React.js based frontend. In fact we weren't able to
complete this, but we got really close. It was a lot of work to get
as far as we did as a team.
</p>

<p>
Most of the other groups also used Python. Multiple groups used
Django, and one group even used <a href="https://www.django-rest-framework.org/">Django Rest Framework</a>. They
appeared to be facing the same challenge we were having with getting
Django to do anything productive in the allotted time. I know at my
next hackathon I won't be recommending Django to the uninitiated.
</p>

<p>
The winning team used <a href="https://firebase.google.com/">Firebase</a>. Every project I've seen done in
Firebase was rapidly prototyped, indicating it is extremely suitable
for hackathons. I have <a href="https://www.gnu.org/philosophy/who-does-that-server-really-serve.html">deep reservations</a> about using a proprietary
PaaS, but maybe I can put this concern aside for my next
hackathon. :)
</p>

<p>
Java. At my university and most others in my area, Java is the first
language we learn. In some cases it may be the only language one
really learns well. In this light, a team member mentioned perhaps we
could use <a href="https://tomcat.apache.org/">Tomcat</a> or some other Java web framework in future. This
seems like a superb idea, I hope to explore this in an upcoming
project with classmates.
</p>
</div>
</div>

<div id="outline-container-orge379750" class="outline-2">
<h2 id="orge379750">Debian surprised me (again)</h2>
<div class="outline-text-2" id="text-orge379750">
<p>
A funny experience during the hackathon was discovering a rather
surprising patch Debian's virtualenv package ships. On CentOS 7,
Gentoo, and possibly anything not Debian derived, running <code>python3 -m
  virtualenv ./venv</code> will create a Python3 virtual environment. <a href="https://stackoverflow.com/questions/51534831/python3-virtualenv-installs-python2">This is
not the case on Debian</a>. Instead Debian <a href="https://salsa.debian.org/python-team/modules/python-virtualenv/blob/master/debian/patches/python2-default.patch">will always default to
installing <code>python2</code></a> in the virtual environment. One must pass <code>-p
  python3</code> to install python3. Sure seems wonky to me!
</p>
</div>
</div>


<div id="outline-container-org3f71200" class="outline-2">
<h2 id="org3f71200">Demos never work</h2>
<div class="outline-text-2" id="text-org3f71200">
<p>
We almost had a working demo, but the part that got us was
deployment. I spun up a <a href="https://www.vultr.com/">Vultr</a> VPS, installed npm, node, caddy,
virtualenv. I got the API backend running, and built the Create
React App pages, and tied it all together with a Caddyfile, but it
simply wouldn't work. There was too many moving parts, and manual
deployment was too tedious to get right within the time frame.
</p>

<p>
There is something to be said for working in
containerized workflows; this would have been a non-issue. Drop in a
<code>docker-compose.yml</code> into the project and just run <code>docker-compose
  up</code>. Next time :)
</p>
</div>
</div>

<div id="outline-container-org7a40dbd" class="outline-2">
<h2 id="org7a40dbd">Teamwork is essential</h2>
<div class="outline-text-2" id="text-org7a40dbd">
<p>
We had a team of eight members, and it was challenging to find
tasks for everybody. Given we had two major components &#x2014; frontend
and backend &#x2014; and we had quite a few members who needed
instruction to get started, it was challenging to give both the
coding and instructing enough attention. In future I strive to have
more balanced teams so everybody can feel more involved. Perhaps a
good rule of thumb is to pair at most one beginner to one
intermediate, never more than one.
</p>

<p>
Something else I think that will help is ensure nobody gets
pigeonholed into managing the project; rather, share the
responsibility. Project managers are likely not effective in a
half-day Hackathon.
</p>

<p>
Keep morale up. Don't let negativity distract from the team
tasks. Redirect negativity into going for a walk, playing video
games, or simply taking a break. Make sure to smile.
</p>
</div>
</div>

<div id="outline-container-orgc2b7a72" class="outline-2">
<h2 id="orgc2b7a72">Conclusion</h2>
<div class="outline-text-2" id="text-orgc2b7a72">
<p>
I had fun at GDG Milwaukee DevFest. Good food, good company. We
found our initial choice of Django was not productive in true
hackathon spirit. Flask was better for this. Maybe next time we'll
consider Firebase. If I had a nickle for every Debian patch that
violated my own idea of least surprise, I'd have laundry
money. Demos are hard, deployments should be automated or otherwise
streamlined. Finally, teamwork is vital. Keep the team small, and
make sure everybody has things to do.
</p>

<p>
See you next year GDG.
</p>
</div>
</div>
<div class="taglist"><a href="tags.html">Tags</a>: <a href="tag-community.html">community</a> </div>]]></description>
  <category><![CDATA[community]]></category>
  <link>https://blog.winny.tech/2019-11-06-gdg-milwaukee-2019-devfest---we-participated.html</link>
  <pubDate>Wed, 06 Nov 2019 02:39:00 -0600</pubDate>
</item>
<item>
  <title><![CDATA[Track down basic Emacs bugs & hangs]]></title>
  <description><![CDATA[
<p>
I ran into a hang today with only ivy enabled and nothing else
configured or installed. The behavior was such that after I typed a
hostname with a TLD (such as <code>not.existant.com</code><sup><a id="fnr.1" class="footref" href="#fn.1">1</a></sup>), then typed
<code>C-x d</code> to visit a directory or <code>C-x C-f</code> to find a file, Emacs would
hang. My mouse would turn into a pin-wheel. My only recourse was to
send the 'quit' command via <code>C-g</code> to cancel the
operation. Unfortunately this meant I could not do one of the simplest
operations in Emacs - visiting files and directories.
</p>

<div id="outline-container-orgc18e260" class="outline-2">
<h2 id="orgc18e260">Enter <code>debug-on-quit</code></h2>
<div class="outline-text-2" id="text-orgc18e260">
<p>
After some searching <a href="https://www.gnu.org/software/emacs/manual/html_node/eintr/Debugging.html#Debugging">I found</a> the <code>debug-on-quit</code> and <code>debug-on-error</code>
variables<sup><a id="fnr.2" class="footref" href="#fn.2">2</a></sup>, with their corresponding commands <code>toggle-debug-on-quit</code>
and <code>toggle-debug-on-error</code>. Enabling <code>debug-on-quit</code> means I can get
a backtrace when I type <code>C-g</code> of what was happening before I signaled
Emacs to quit the current command. Here is an example backtrace:
</p>

<div class="org-src-container">
<pre class="src src-fundamental">Debugger entered--Lisp error: (quit)
  make-network-process(:name <span style="color: #61CE3C;">"ffap-machine-p"</span> :buffer nil :host <span style="color: #61CE3C;">"not.existant.com"</span> :service <span style="color: #61CE3C;">"discard"</span> :nowait nil :tls-parameters nil)
  open-network-stream(<span style="color: #61CE3C;">"ffap-machine-p"</span> nil <span style="color: #61CE3C;">"not.existant.com"</span> <span style="color: #61CE3C;">"discard"</span>)
  ffap-machine-p(<span style="color: #61CE3C;">"not.existant.com"</span>)
  ffap-machine-at-point()
  ffap-guesser()
  ffap-guess-file-name-at-point()
  run-hook-with-args-until-success(ffap-guess-file-name-at-point)
  ivy-thing-at-point()
  ivy--reset-state(#s(ivy-state :prompt <span style="color: #61CE3C;">"Find file: "</span> :collection read-file-name-internal :predicate nil :require-match confirm-after-completion :initial-input nil :history file-name-history :preselect nil :keymap (keymap (96 lambda (&amp;optional arg) <span style="color: #61CE3C;">"nil (`nil')"</span> (interactive <span style="color: #61CE3C;">"p"</span>) (if (string= <span style="color: #61CE3C;">""</span> ivy-text) (execute-kbd-macro (kbd <span style="color: #61CE3C;">"M-o b"</span>)) (self-insert-command arg))) (C-backspace . counsel-up-directory) (67108991 . counsel-up-directory)) :update-fn nil :sort nil :frame #&lt;frame (Emacs) dummy.txt [Text] /tmp/dummy.txt 0x70a1e20&gt; :window #&lt;window 7 on dummy.txt&gt; :buffer #&lt;buffer dummy.txt&gt; :text nil :action (1 (<span style="color: #61CE3C;">"o"</span> counsel-find-file-action <span style="color: #61CE3C;">"default"</span>) (<span style="color: #61CE3C;">"i"</span> #f(compiled-function (x) #&lt;bytecode 0x1b79a11&gt;) <span style="color: #61CE3C;">"insert"</span>) (<span style="color: #61CE3C;">"w"</span> #f(compiled-function (x) #&lt;bytecode 0x1b79a21&gt;) <span style="color: #61CE3C;">"copy"</span>) (<span style="color: #61CE3C;">"j"</span> find-file-other-window <span style="color: #61CE3C;">"other window"</span>) (<span style="color: #61CE3C;">"f"</span> find-file-other-frame <span style="color: #61CE3C;">"other frame"</span>) (<span style="color: #61CE3C;">"b"</span> counsel-find-file-cd-bookmark-action <span style="color: #61CE3C;">"cd bookmark"</span>) (<span style="color: #61CE3C;">"x"</span> counsel-find-file-extern <span style="color: #61CE3C;">"open externally"</span>) (<span style="color: #61CE3C;">"r"</span> counsel-find-file-as-root <span style="color: #61CE3C;">"open as root"</span>) (<span style="color: #61CE3C;">"R"</span> find-file-read-only <span style="color: #61CE3C;">"read only"</span>) (<span style="color: #61CE3C;">"k"</span> counsel-find-file-delete <span style="color: #61CE3C;">"delete"</span>) (<span style="color: #61CE3C;">"c"</span> counsel-find-file-copy <span style="color: #61CE3C;">"copy file"</span>) (<span style="color: #61CE3C;">"m"</span> counsel-find-file-move <span style="color: #61CE3C;">"move or rename"</span>) (<span style="color: #61CE3C;">"d"</span> counsel-find-file-mkdir-action <span style="color: #61CE3C;">"mkdir"</span>)) :unwind nil :re-builder nil :matcher counsel--find-file-matcher :dynamic-collection nil :display-transformer-fn ivy-read-file-transformer :directory <span style="color: #61CE3C;">"/tmp/"</span> :caller counsel-find-file :current nil :def nil :ignore t :multi-action nil :extra-props nil))
  ivy-read(<span style="color: #61CE3C;">"Find file: "</span> read-file-name-internal :matcher counsel--find-file-matcher :initial-input nil :action counsel-find-file-action :preselect nil :require-match confirm-after-completion :history file-name-history :keymap (keymap (96 lambda (&amp;optional arg) <span style="color: #61CE3C;">"nil (`nil')"</span> (interactive <span style="color: #61CE3C;">"p"</span>) (if (string= <span style="color: #61CE3C;">""</span> ivy-text) (execute-kbd-macro (kbd <span style="color: #61CE3C;">"M-o b"</span>)) (self-insert-command arg))) (C-backspace . counsel-up-directory) (67108991 . counsel-up-directory)) :caller counsel-find-file)
  counsel--find-file-1(<span style="color: #61CE3C;">"Find file: "</span> nil counsel-find-file-action counsel-find-file)
  counsel-find-file()
  funcall-interactively(counsel-find-file)
  call-interactively(counsel-find-file nil nil)
  command-execute(counsel-find-file)
</pre>
</div>

<p>
If one tries this, they'll also notice every function is a link to the
corresponding Emacs lisp or C source function. Pressing <code>RET</code> with
point on an item will find its definition. Use <code>C-.</code> and <code>C-,</code> as
usual to <a href="https://www.gnu.org/software/emacs/manual/html_node/emacs/Looking-Up-Identifiers.html#Looking-Up-Identifiers">follow and return from function definitions</a>.
</p>

<p>
Thanks to this feature, I was able to quickly focus on a "bug" related
to the find file at point subsystem as used by ivy, which causes Emacs
to ping random hostname-looking addresses under the point. <a href="https://github.com/abo-abo/swiper/issues/2311">I reported
it</a>, maybe a default will get changed; most importantly, it's
documented somewhere now.
</p>
</div>
</div>

<div id="outline-container-org0954e5e" class="outline-2">
<h2 id="org0954e5e">Don't forget about <code>debug-on-error</code></h2>
<div class="outline-text-2" id="text-org0954e5e">
<p>
<code>debug-on-error</code> is also extremely useful, especially when extending
Emacs with your own Elisp code. When I write Elisp, I almost always
enabled this when testing. The Elisp language and its libraries are
somewhat anachronistic and each component is seemingly tightly coupled
with the next, making it hard to understand any particular
subsystem. You <span class="underline">will</span> write bad Elisp, even if you're a wizard.
Everybody writes buggy Elisp. That's why I find an Emacs bug
every few months.  <a href="https://www.emacswiki.org/emacs/WhyDoesElispSuck">It's just a very awkward language</a>. Regardless, Emacs
is probably the most flexible and powerful editor out there, and in
this case, <a href="https://www.dreamsongs.com/WorseIsBetter.html">Worse is Better</a>. And don't forget, a good challenge is a
fun challenge.
</p>
</div>
</div>
<div id="footnotes">
<h2 class="footnotes">Footnotes: </h2>
<div id="text-footnotes">

<div class="footdef"><sup><a id="fn.1" class="footnum" href="#fnr.1">1</a></sup> <div class="footpara"><p class="footpara">
I know I misspelled existent. What's important is it's
recognized as a valid fully qualified domain name by Emacs.
</p></div></div>

<div class="footdef"><sup><a id="fn.2" class="footnum" href="#fnr.2">2</a></sup> <div class="footpara"><p class="footpara">
By the way, you can just read the info pages in Emacs (<code>C-h
i</code>). Don't be like me, and read the infopages in the web browser,
that's silly. Emacs is the best documetation browser. :)
</p></div></div>


</div>
</div><div class="taglist"><a href="tags.html">Tags</a>: <a href="tag-emacs.html">emacs</a> <a href="tag-productivity.html">productivity</a> </div>]]></description>
  <category><![CDATA[emacs]]></category>
  <category><![CDATA[productivity]]></category>
  <link>https://blog.winny.tech/2019-11-01-track-down-basic-emacs-bugs-hangs.html</link>
  <pubDate>Fri, 01 Nov 2019 17:54:00 -0500</pubDate>
</item>
<item>
  <title><![CDATA[The Danger of fuzzy matching over one's PATH]]></title>
  <description><![CDATA[
<p>
Awhile back I noticed my personal <code>mnt/</code> directory, my (empty) personal
<code>tmp/</code> directory, and a few symbolic links disappeared from my home
directory. I only noticed because I use unison<sup><a id="fnr.1" class="footref" href="#fn.1">1</a></sup> to synchronize my
desktop and laptop homedirs. The actual amount of removed directories
and symbolic links were staggering, and it costed me five minutes of
extra effort to search through the unison UI to ignore files I don&rsquo;t
want to synchronize. Repeat this a few times a day, with the problem
occurring at seemingly random intervals, and you&rsquo;ve wasted minutes out
of every day, which adds up to hours every month.
</p>

<p>
For months I had not figured out what the problem was. By chance I had
noticed while using my application launcher, I had accidentally not
ran <code>links -g</code> <sup><a id="fnr.2" class="footref" href="#fn.2">2</a></sup> but instead had ran <code>cleanlinks</code>. I wonder to myself
what was I running by accident, as I had done this before, but had not
thought anything of it, assuming it was a program that would print
usage or perform a no-operation by default.
</p>

<p>
I was wrong.
</p>

<p>
Turns out <code>cleanlinks</code> searches the current working directory for <b>empty</b>
directories and <b>broken</b> symbolic links. Both are useful. For example I
keep empty directories in <code>~/mnt/</code> to mount <code>sshfs</code> stuff, and I prefer to
use <code>~/tmp/</code> as a work directory because no system scripts will touch
it.<sup><a id="fnr.3" class="footref" href="#fn.3">3</a></sup> I had a few <b>broken</b> symbolic links scattered about, from
weird git repositories working trees to some stale user-level systemd
unit links from my archlinux install.
</p>

<p>
Making things more interesting, if you run <code>cleanlinks --help</code>, or with
any flags, it operates as usual. So it&rsquo;s a mistake to also do
<code>cleanlinks /some/directory/i/want/to/clean</code>. As a part of imake,<sup><a id="fnr.4" class="footref" href="#fn.4">4</a></sup>
the old X11 ecosystem build tools, <code>cleanlinks</code> will be installed on
many systems and it&rsquo;s not safe to run it lest you enjoy random stuff
being messed about with in your current directory.
</p>

<p>
How did I manage to run <code>cleanlinks</code> so many times? I did not have links
installed on the affected machine. And even after I did install it, I
forgot to remove <code>cleanlinks</code> from my rofi runcache. So it had a higher
precedence to match than <code>links</code> in certain cases. Hence I ran it a few
times on accident even after installing links.
</p>

<p>
Therefore, I strongly recommend one doesn&rsquo;t fuzzy match over their
<code>PATH</code>. Who knows what other nasty tools ship on your system that will
lay waste your productivity, or worse, damage your personal files.
</p>

<p>
Regardless, I have yet to heed my own warning. Maybe I should just use
<code>.desktop</code> files, but then again, maybe there exists a
<code>cleanlinks.desktop</code>&#x2026; Ideally, I&rsquo;ll create a directory of  symlinks to
programs I want to launch from rofi. Someday :)
</p>

<div id="outline-container-org97543e9" class="outline-2">
<h2 id="org97543e9">About Unison</h2>
<div class="outline-text-2" id="text-org97543e9">
<p>
I should mention unison is a superb tool for synchronizing your
data. It shows the user a list of changes to each directory being
synchronized, waits for the user to decide which way each file should
be synchronized:
</p>

<ol class="org-ol">
<li>Send file from host A to B</li>
<li>Send file from host B to A</li>
<li>Ignore the file this time</li>
<li>Ignore the file permanently</li>
<li>Merge the files</li>
</ol>

<p>
Because unison doesn&rsquo;t try to be fancy or automatic, it is easy to
understand what is happening.
</p>
</div>
</div>
<div id="footnotes">
<h2 class="footnotes">Footnotes: </h2>
<div id="text-footnotes">

<div class="footdef"><sup><a id="fn.1" class="footnum" href="#fnr.1">1</a></sup> <div class="footpara"><p class="footpara">
<a href="https://www.cis.upenn.edu/~bcpierce/unison/">Unison homepage</a>
</p></div></div>

<div class="footdef"><sup><a id="fn.2" class="footnum" href="#fnr.2">2</a></sup> <div class="footpara"><p class="footpara">
Links 2 is the best web 1.0 browser. It even shows images and
different text sizes. Screenshots on <a href="http://links.twibright.com/features.php">this page</a>.
</p></div></div>

<div class="footdef"><sup><a id="fn.3" class="footnum" href="#fnr.3">3</a></sup> <div class="footpara"><p class="footpara">
<code>/var/tmp/</code> could also work, but this way I know nobody is gunna
mess with my files and I won&rsquo;t accidentally mess up permissions on
sensitive data.
</p></div></div>

<div class="footdef"><sup><a id="fn.4" class="footnum" href="#fnr.4">4</a></sup> <div class="footpara"><p class="footpara">
<a href="https://gitlab.freedesktop.org/xorg/util/imake">imake on freedesktop&rsquo;s GitLab</a>. See also what packages depend on
imake <a href="https://www.archlinux.org/packages/extra/x86_64/imake/">in Arch Linux</a>. I use Gentoo across my laptop and workstation, so
it&rsquo;s necessary to have imake installed.
</p></div></div>


</div>
</div><div class="taglist"><a href="tags.html">Tags</a>: <a href="tag-computing.html">computing</a> <a href="tag-rant.html">rant</a> </div>]]></description>
  <category><![CDATA[computing]]></category>
  <category><![CDATA[rant]]></category>
  <link>https://blog.winny.tech/2019-08-02-the-danger-of-fuzzy-matching-over-ones-path.html</link>
  <pubDate>Fri, 02 Aug 2019 06:00:00 -0500</pubDate>
</item>
<item>
  <title><![CDATA[Open URL in existing Qutebrowser from Emacs Daemon on Gentoo]]></title>
  <description><![CDATA[
<p>
On my Gentoo desktops, I use Emacs Daemon via <code>sys-emacs/emacs-daemon</code><sup><a id="fnr.1" class="footref" href="#fn.1">1</a></sup>
to ensure an Emacs instance is ready to go and always available from
boot. This is done via creating a symbolic link like
<code>/etc/init.d/emacs.winston</code> to <code>/etc/init.d/emacs</code> which will start Emacs
for the given user. See the package README for more details.
</p>

<p>
A shortcoming of this setup is <code>XDG_RUNTIME_DIR</code><sup><a id="fnr.2" class="footref" href="#fn.2">2</a></sup> is not set, as this is
set by my Desktop Session - maybe LightDM or consolekit set this? As a
result, when I open a URL from Emacs Daemon, it opens a fresh
qutebrowser session, loading the saved default session, and making a
mess of my workflow.
</p>

<p>
One approach to fix this might be to instead run Emacs daemon from my
<code>.xsession</code> script, but I rather not supervise daemons at the user
level; if I were to consider this, I'd be better off to switch to
systemd for user-level services anyway.
</p>

<p>
The solution I came up with is to add some lines to my <code>init.el</code> to
ensure <code>XDG_RUNTIME_DIR</code> is set to the expected value:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #4c83ff;">defun</span> <span style="color: #ff1493;">winny/ensure-XDG_RUNTIME_DIR</span> ()
  <span style="color: #FBDE2D;">"Ensure XDG_RUNTIME_DIR is set. Used by qutebrowser and other utilities."</span>
  (<span style="color: #4c83ff;">let</span> ((rd (getenv <span style="color: #61CE3C;">"XDG_RUNTIME_DIR"</span>)))
    (<span style="color: #4c83ff;">when</span> (<span style="color: #4c83ff;">or</span> (not rd) (string-empty-p rd))
      (setenv <span style="color: #61CE3C;">"XDG_RUNTIME_DIR"</span> (format <span style="color: #61CE3C;">"/run/user/%d"</span> (user-uid))))))

(add-hook 'after-init-hook #'winny/ensure-XDG_RUNTIME_DIR)
</pre>
</div>

<p>
A strange emacs-ism: <code>(user-uid)</code> returns float or integer, despite the
backing <code>uid_t</code> (on *nix) is guarenteed to be an integer type. I'll just
assume this'll never return a float. Please contact me otherwise, I'd
love to hear about this.
</p>
<div id="footnotes">
<h2 class="footnotes">Footnotes: </h2>
<div id="text-footnotes">

<div class="footdef"><sup><a id="fn.1" class="footnum" href="#fnr.1">1</a></sup> <div class="footpara"><p class="footpara">
<a href="https://packages.gentoo.org/packages/app-emacs/emacs-daemon">https://packages.gentoo.org/packages/app-emacs/emacs-daemon</a>
</p></div></div>

<div class="footdef"><sup><a id="fn.2" class="footnum" href="#fnr.2">2</a></sup> <div class="footpara"><p class="footpara">
<a href="https://specifications.freedesktop.org/basedir-spec/basedir-spec-latest.html">freedesktop.org XDG Base Directory Specification</a>
</p></div></div>


</div>
</div><div class="taglist"><a href="tags.html">Tags</a>: <a href="tag-emacs.html">emacs</a> <a href="tag-productivity.html">productivity</a> <a href="tag-computing.html">computing</a> <a href="tag-gentoo.html">gentoo</a> <a href="tag-qutebrowser.html">qutebrowser</a> </div>]]></description>
  <category><![CDATA[emacs]]></category>
  <category><![CDATA[productivity]]></category>
  <category><![CDATA[computing]]></category>
  <category><![CDATA[gentoo]]></category>
  <category><![CDATA[qutebrowser]]></category>
  <link>https://blog.winny.tech/2019-07-28-open-url-in-existing-qutebrowser-from-emacs-daemon-on-gentoo.html</link>
  <pubDate>Sun, 28 Jul 2019 03:38:00 -0500</pubDate>
</item>
<item>
  <title><![CDATA[Blink Shell: First Thoughts]]></title>
  <description><![CDATA[
<p>
As a heavy user of SSH to manage computers and IRC via command line
clients, the most used application on my phone besides the web browser
is a SSH client. Previously I have used Prompt and it worked, but
barely. My issues with Prompt include crashing on emoji spam that is common
in certain IRC channels, very slow terminal rendering to the point
that watching the output of compiling a large package will cause
Prompt to lag uncontrollably for tens of seconds, and a relatively
un-intuitive UI. Please note I am referring to Prompt, not Prompt 2<sup><a id="fnr.1" class="footref" href="#fn.1">1</a></sup>,
which is another problem in itself (the idea I need to pay for the
same product but rewritten to actually work is just ludicrous).
</p>


<figure>
<img src="static/image/blink-thumb.png" alt="blink-thumb.png">

</figure>

<p>
Another thing to note before I dig into Blink is I'm not a big fan of
mobile devices. They get the job done, but in most cases I rather
crack open my netbook and not fight with the learn-by-fiddling mobile
UI paradigms most devices have adopted. I am also not a fan of Apple's
ecosystem, but I'm pretty content with my iPhone and iPad for my
basic use cases: browse the web, chat applications, making phone
calls, casual mobile gaming, logging into other computers via SSH.
</p>

<p>
Enter Blink<sup><a id="fnr.2" class="footref" href="#fn.2">2</a></sup>. This application does a few things differently from other
mobile SSH clients. It offers a command-line first user interface. At
first I thought this would be painful, but the application's verbs are
pretty simple and appear to match up with how one uses ssh and mosh in
a terminal emulator. The terminal emulator is responsive,
significantly more stable than Prompt, and looks good. I can even load
up my favorite font: Droid Sans Mono<sup><a id="fnr.3" class="footref" href="#fn.3">3</a></sup> (thanks to its support for
loading webfonts via a URL to a CSS file).
</p>

<p>
Another thing Blink does different is it offers
Mosh support<sup><a id="fnr.4" class="footref" href="#fn.4">4</a></sup>. Mosh is an alternative to SSH that can "roam" across
networks and device power state changes. One thing to note is Mosh
requires SSH to make the initial login, then switches to Mosh which
uses a different protocol. When using mosh, I tend to log in once
throughout the day. I can then switch networks and mosh will
gracefully reconnect as soon as the server is reachable again. In
addition, when I sleep my netbook, the session isn't lost (but don't
go using this instead of tmux or screen). Instead when I wake my
netbook, it also gracefully reconnects to the server. The same is true
of Blink's Mosh support. It even appears to save state between
changing iOS application states, sans forcing the application to quit
(or rebooting your device). This means I only log in once on my phone
throughout the day, and the connection is gracefully dropped when the
app becomes inactive and reconnects when the app is opened again.
</p>

<p>
I did notice I crashed Blink after writing non-ascii binary data to
the terminal followed by some other operations, but did not manage to
reproduce the crash yet. If I do, I am confident I can report the bug
and get meaningful feedback too, as Blink has a bug tracker on
GitHub<sup><a id="fnr.5" class="footref" href="#fn.5">5</a></sup>. The code is available under GPLv3 (but not to worry, as the
single copyright holder can safely relicense it to deploy on the iOS
App Store<sup><a id="fnr.6" class="footref" href="#fn.6">6</a></sup>). I could probably build it myself and install that, but I
neither own a Mac (or wish to install Mac OS X in a VM) nor want to
ever open XCode again even if I had a way to. That life isn't for me.
Again, I'm very practical about how I use my iOS devices and don't
enjoy using them more than I have to, so I'm willing to pay $20 for
an application I'll use every day of my life on this walled garden
platform. An added silver lining is this investment
goes towards the development of such a great app that appears to have
active maintainership.
</p>

<p>
Note: I did not explore some of Blink's features such as using it a
local iOS shell or settings synchronization. YMMV.
</p>

<div id="outline-container-orgfe13a22" class="outline-2">
<h2 id="orgfe13a22">Getting started</h2>
<div class="outline-text-2" id="text-orgfe13a22">
<p>
Here are the steps I used to get started with Blink, as it was
relatively unclear where to find documentation and which settings
are necessary to configure. Usage information can be
found via the <code>help</code> command, the README on GitHub<sup><a id="fnr.7" class="footref" href="#fn.7">7</a></sup>, and fiddling
with the UI.
</p>

<ol class="org-ol">
<li>Run the <code>config</code> command.
<ol class="org-ol">
<li>Default User -&gt; set to your preferred username on most of your servers</li>
<li>Add a new font via: Appearance -&gt; Add a new font. Open the
gallery and grab the raw CSS file (you can get a raw URL after
switching to GitHub desktop), then paste it into the URL
Address Field. I prefer Droid Sans Mono for its readability at
all sizes.</li>
<li><p>
Keys -&gt; + -&gt; Create New
</p>

<p>
Please use ssh keypair authentication. Password authentication
requires you to memorize a password to log in which can be
bruteforced or otherwise leaked when typing it in the wrong
context. Also, be sure to use a unique key on each of your
devices to make revocation easier when a device is no longer
used.
</p>

<p>
Note: it appears keys are always stored as plaintext,
which is acceptable for your uses, but it appears <code>ssh-keygen</code>
can create a key with a passphrase. I wasn't able to get Blink
to work with Passphrase protected keys, but I didn't try very
hard. YMMV.
</p>

<ul class="org-ul">
<li>Type: RSA</li>
<li>Bits: 4096 (why not?)</li>
<li>Name: <code>id_rsa</code></li>
</ul></li>
<li>Hosts -&gt; +
<ul class="org-ul">
<li>Host: the name you gave your host when running <code>ssh host</code> or
<code>mosh host</code>. This is not related to the server's hostname,
though it can be the same. I prefer simple names, usually
the hostname before the first dot (e.g. <code>worf.winny.tech</code>
becomes simply <code>worf</code>)</li>
<li>User: make sure this is correct</li>
<li>Key: select a key to use.</li>
</ul></li>
</ol></li>
<li>Now you need to install the SSH public key:
<ol class="org-ol">
<li>Run <code>config</code> again</li>
<li>Keys -&gt; <code>id_rsa</code> -&gt; Copy Public Key</li>
<li><p>
Install it some way.
</p>

<p>
I usually prefer to visit
<a href="https://ptpb.pw/f">https://ptpb.pw/f</a> and paste the public key, hit Paste, then
copy the url with the text of "created". You can then <code>curl
        https://ptpb.pw/PasteId</code> on the server via another login setup
(or ssh from a set up machine) and add it to your
<code>~/.ssh/authorized_keys</code>. Make sure that file is mode 0600
(<code>chmod 0600 ~/.ssh/authorized_keys</code>). Also make sure the
<code>.ssh</code> directory is 0700 (<code>chmod 0700 ~/.ssh</code>). OpenSSH
refuses to use <code>authorized_keys</code> if these permissions are world
readable.
</p></li>
</ol></li>
<li>Run <code>ssh worf</code>. Congratuations, you now have a SSH session on the
best iOS client available at this time.</li>
<li>To use mosh, ensure mosh is installed on the server.<sup><a id="fnr.8" class="footref" href="#fn.8">8</a></sup> Then
run <code>mosh worf</code>.</li>
</ol>
</div>
</div>
<div id="footnotes">
<h2 class="footnotes">Footnotes: </h2>
<div id="text-footnotes">

<div class="footdef"><sup><a id="fn.1" class="footnum" href="#fnr.1">1</a></sup> <div class="footpara"><p class="footpara">
<a href="https://www.panic.com/prompt/">Prompt 2 Homepage</a>
</p></div></div>

<div class="footdef"><sup><a id="fn.2" class="footnum" href="#fnr.2">2</a></sup> <div class="footpara"><p class="footpara">
<a href="http://www.blink.sh/">Blink Shell Homepage</a>
</p></div></div>

<div class="footdef"><sup><a id="fn.3" class="footnum" href="#fnr.3">3</a></sup> <div class="footpara"><p class="footpara">
<a href="https://www.droidfonts.com/info/droid-sans-mono-fonts/">Droid Sans Mono Homepage</a>
</p></div></div>

<div class="footdef"><sup><a id="fn.4" class="footnum" href="#fnr.4">4</a></sup> <div class="footpara"><p class="footpara">
<a href="https://mosh.org/">Mosh Homepage</a>
</p></div></div>

<div class="footdef"><sup><a id="fn.5" class="footnum" href="#fnr.5">5</a></sup> <div class="footpara"><p class="footpara">
<a href="https://github.com/blinksh/blink">Blink on GitHub</a>
</p></div></div>

<div class="footdef"><sup><a id="fn.6" class="footnum" href="#fnr.6">6</a></sup> <div class="footpara"><p class="footpara">
<a href="https://apple.stackexchange.com/a/59495/140932">Ask Different: Is it possible to have GPL software in the Mac App Store?</a>
</p></div></div>

<div class="footdef"><sup><a id="fn.7" class="footnum" href="#fnr.7">7</a></sup> <div class="footpara"><p class="footpara">
<a href="https://github.com/blinksh/blink#using-blink">README Â§ Using Blink</a>
</p></div></div>

<div class="footdef"><sup><a id="fn.8" class="footnum" href="#fnr.8">8</a></sup> <div class="footpara"><p class="footpara">
<a href="https://mosh.org/#getting">Getting Mosh</a>
</p></div></div>


</div>
</div><div class="taglist"><a href="tags.html">Tags</a>: <a href="tag-computing.html">computing</a> </div>]]></description>
  <category><![CDATA[computing]]></category>
  <link>https://blog.winny.tech/2019-01-22-blink-shell-first-thoughts.html</link>
  <pubDate>Tue, 22 Jan 2019 22:35:00 -0600</pubDate>
</item>
<item>
  <title><![CDATA[GNU C Style]]></title>
  <description><![CDATA[
<p>
No. Do not use it please! There are far easier-to-read and easier-to-use styles
for C!<sup><a id="fnr.1" class="footref" href="#fn.1">1</a></sup>
</p>


<figure>
<img src="static/image/gnu-comic.png" alt="gnu-comic.png">

</figure>
<div id="footnotes">
<h2 class="footnotes">Footnotes: </h2>
<div id="text-footnotes">

<div class="footdef"><sup><a id="fn.1" class="footnum" href="#fnr.1">1</a></sup> <div class="footpara"><p class="footpara">
<a href="https://en.wikipedia.org/wiki/Indentation_style">Indentation Style on Wikipedia</a>
</p></div></div>


</div>
</div><div class="taglist"><a href="tags.html">Tags</a>: <a href="tag-computing.html">computing</a> <a href="tag-rant.html">rant</a> </div>]]></description>
  <category><![CDATA[computing]]></category>
  <category><![CDATA[rant]]></category>
  <link>https://blog.winny.tech/2019-01-13-gnu-c-style.html</link>
  <pubDate>Sun, 13 Jan 2019 12:57:00 -0600</pubDate>
</item>
<item>
  <title><![CDATA[Publishing with org-static-blog]]></title>
  <description><![CDATA[

<div id="outline-container-org8bd1aad" class="outline-2">
<h2 id="org8bd1aad">Criteria</h2>
<div class="outline-text-2" id="text-org8bd1aad">
<p>
After reviewing a list of org-mode<sup><a id="fnr.1" class="footref" href="#fn.1">1</a></sup> capable static website generators<sup><a id="fnr.2" class="footref" href="#fn.2">2</a></sup>,
I decided to see if org-static-blog<sup><a id="fnr.3" class="footref" href="#fn.3">3</a></sup> could suffice my simple
needs. My criteria for choosing an org-mode static site generator was:
</p>

<ul class="org-ul">
<li>it must be actively maintained,</li>
<li>it must be simple to set up with customizations,</li>
<li>and it must work with Emacs 26 and later.</li>
</ul>

<p>
This ruled out quite a few right away. I didn't attempt using
org-publish, as it looked like a great deal of configuration to
achieve a minimum viable web-page for this project.
</p>
</div>
</div>

<div id="outline-container-orgdcb799b" class="outline-2">
<h2 id="orgdcb799b">Configuration of <code>org-static-blog</code></h2>
<div class="outline-text-2" id="text-orgdcb799b">
<p>
Following the org-static-blog README documentation, it is very
straight forward to get a minimal viable website generated. I added
the following to my <code>init.el</code>:
</p>

<div class="org-src-container">
<pre class="src src-elisp">(add-to-list 'auto-mode-alist (cons (concat org-static-blog-posts-directory <span style="color: #61CE3C;">".*\\.org\\'"</span>) 'org-static-blog-mode))
(<span style="color: #4c83ff;">setq</span> org-static-blog-publish-title <span style="color: #61CE3C;">"blog.winny.tech"</span>)
(<span style="color: #4c83ff;">setq</span> org-static-blog-publish-url <span style="color: #61CE3C;">"https://blog.winny.tech/"</span>)
(<span style="color: #4c83ff;">setq</span> org-static-blog-publish-directory <span style="color: #61CE3C;">"~/projects/blog/"</span>)
(<span style="color: #4c83ff;">setq</span> org-static-blog-posts-directory <span style="color: #61CE3C;">"~/projects/blog/posts/"</span>)
(<span style="color: #4c83ff;">setq</span> org-static-blog-drafts-directory <span style="color: #61CE3C;">"~/projects/blog/drafts/"</span>)
(<span style="color: #4c83ff;">setq</span> org-static-blog-enable-tags t)

(<span style="color: #4c83ff;">setq</span> org-static-blog-page-header
      <span style="color: #61CE3C;">"</span>
<span style="color: #61CE3C;">&lt;link href=\"static/style.css\" rel=\"stylesheet\" type=\"text/css\" /&gt;</span>
<span style="color: #61CE3C;">"</span>)
</pre>
</div>

<p>
I opted to <code>setq</code> all the configuration variables; I will likely
switch to using <code>M-x customize-group RET org-static-blog RET</code> in the
future however. It's a better experience.
</p>

<p>
Then I simply create a new post with
<code>M-x org-static-blog-create-new-post RET &lt;TITLE&gt; RET</code>, edit the
buffer, save it, then run <code>M-x org-static-blog-publish RET</code>.
I also added some styling to my <code>style.css</code><sup><a id="fnr.4" class="footref" href="#fn.4">4</a></sup> based off the Tachyons CSS
framework<sup><a id="fnr.5" class="footref" href="#fn.5">5</a></sup>. I had previously used Bootstrap<sup><a id="fnr.6" class="footref" href="#fn.6">6</a></sup> for styling but was hoping
to avoid adding framework and other extra tooling that shouldn't
be necessary to generate a simple site like this one.
</p>
</div>
</div>

<div id="outline-container-org61826ef" class="outline-2">
<h2 id="org61826ef">Deploying with Caddy and GitHub</h2>
<div class="outline-text-2" id="text-org61826ef">
<p>
I am a fan of the Caddy<sup><a id="fnr.7" class="footref" href="#fn.7">7</a></sup> web server which offers automatic HTTPS
via LetsEncrypt with only a few lines of configuration. In addition
Caddy has a plugin named git which offers the ability to
automatically deploy content from git repositories with webhook
support. To deploy the following steps are taken:
</p>

<ol class="org-ol">
<li><code>M-x org-static-blog-publish RET</code> from Emacs to regenerate the
static site,</li>
<li>commit the changes in git,</li>
<li>and finally push the git branch to GitHub.</li>
</ol>

<p>
After these steps, GitHub automatically sends a HTTP POST request to my Caddy
server with information about the new git commits and Caddy pulls the
git repository. If everything went well and the webhook successfully
fired, the website is now deployed.
</p>
</div>

<div id="outline-container-org6f48f40" class="outline-3">
<h3 id="org6f48f40">Server Configuration</h3>
<div class="outline-text-3" id="text-org6f48f40">
<p>
I switched most of my personal internet-related services to Docker<sup><a id="fnr.8" class="footref" href="#fn.8">8</a></sup> in
conjunction with <code>docker-compose</code><sup><a id="fnr.9" class="footref" href="#fn.9">9</a></sup> last year. The main rationale
is I can move my configuration without dealing with systems package
versions.  I already had Caddy set up,
so it was as simple as adding this to my <code>Caddyfile</code>:
</p>

<div class="org-src-container">
<pre class="src src-conf"><span style="color: #afd8af;">blog.winny.tech</span> {
        root /srv/www/blog.winny.tech
        gzip
        log /logs/blog.winny.tech.log
        git https://github.com/winny-/blog.winny.tech {
                hook /webhook top-secret-password-redacted
        }
}
</pre>
</div>

<p>
The relevant lines of my <code>docker-compose.yml</code> looks like this:
</p>

<div class="org-src-container">
<pre class="src src-yaml"><span style="color: #ff69b4;">version</span>: <span style="color: #61CE3C;">"2.1"</span>
<span style="color: #ff69b4;">services</span>:
  <span style="color: #ff69b4;">web</span>:
    <span style="color: #ff69b4;">image</span>: abiosoft/caddy:no-stats
    <span style="color: #ff69b4;">ports</span>:  <span style="color: #8B8989; font-style: italic;"># </span><span style="color: #8B8989; font-style: italic;">Expose the webserver ports to the internet</span>
      - <span style="color: #61CE3C;">"80:80"</span>
      - <span style="color: #61CE3C;">"443:443"</span>
    <span style="color: #ff69b4;">environment</span>:
      <span style="color: #8B8989; font-style: italic;"># </span><span style="color: #8B8989; font-style: italic;">This is where caddy places certs after ACME negotiation.</span>
      <span style="color: #ff69b4;">CADDYPATH</span>: <span style="color: #61CE3C;">"/etc/caddycerts"</span>
      <span style="color: #ff69b4;">ACME_AGREE</span>: <span style="color: #61CE3C;">"true"</span>
    <span style="color: #ff69b4;">volumes</span>:
      - /srv/caddy/certs:/etc/caddycerts
      - /srv/caddy/Caddyfile:/etc/Caddyfile  <span style="color: #8B8989; font-style: italic;"># </span><span style="color: #8B8989; font-style: italic;">Configuration</span>
      - /srv/www:/srv/www  <span style="color: #8B8989; font-style: italic;"># </span><span style="color: #8B8989; font-style: italic;">the websites</span>
      - /srv/caddy/logs:/logs
</pre>
</div>

<p>
A keen <code>docker-compose</code>-savy reader will notice I did not specify a
<code>restart: always</code> entry. I had Caddy configured to always restart,
however, when requesting new HTTPS certificates from LetsEncrypt, there
is a tendency to misconfigure the domain configuration or Caddyfile,
and if Caddy requests too many HTTPS certificates in a short amount of
time, LetsEcrypt will rate-limit my future requests. Usually this is
only requires an hour or two of waiting, but is frustrating to deal
with when trying to fix my configuration. Instead I rather Caddy
exit after failing to activate all the domains and fix my
configuration first.
</p>
</div>
</div>

<div id="outline-container-org62b74f4" class="outline-3">
<h3 id="org62b74f4">GitHub Configuration</h3>
<div class="outline-text-3" id="text-org62b74f4">
<p>
Simply create the GitHub repository, then add a webhook. It is
important to note the webhook <i>must</i> send a JSON payload. By default a
newly created webhook will send a <code>application/x-www-form-urlencoded</code>
payload and will not work.
</p>
</div>
</div>
</div>

<div id="outline-container-orgcd480aa" class="outline-2">
<h2 id="orgcd480aa">Conclusion</h2>
<div class="outline-text-2" id="text-orgcd480aa">
<p>
With this simple setup I can write posts. I can easily move the
configuration to a new host at will. In addition my setup does not
depend on future use of GitHub as GitLab, Gogs, and other git hosts
offer webhook support in the same way. Most importantly, I can author
org-mode files and have a better balance between features and ease of
use than what markdown offers.
</p>

<p>
Web dev is one of my least
favorite programming exercises. Between all the testing necessary to
ensure a simple site works across many platforms, the trend to use a
very complex system such as webpack and many other tools to produce
simple websites, and the perpetual flux-and-flow between vendors only
partially implementing good features, web dev just doesn't do it for
me. Hence, I am very pleased how simple this project turned out to
be.
</p>
</div>
</div>
<div id="footnotes">
<h2 class="footnotes">Footnotes: </h2>
<div id="text-footnotes">

<div class="footdef"><sup><a id="fn.1" class="footnum" href="#fnr.1">1</a></sup> <div class="footpara"><p class="footpara">
<a href="https://orgmode.org/">org-mode homepage</a>
</p></div></div>

<div class="footdef"><sup><a id="fn.2" class="footnum" href="#fnr.2">2</a></sup> <div class="footpara"><p class="footpara">
<a href="https://orgmode.org/worg/org-blog-wiki.html">Blogs and Wikis with Org</a>
</p></div></div>

<div class="footdef"><sup><a id="fn.3" class="footnum" href="#fnr.3">3</a></sup> <div class="footpara"><p class="footpara">
<a href="https://github.com/bastibe/org-static-blog/">org-static-blog on GitHub</a>
</p></div></div>

<div class="footdef"><sup><a id="fn.4" class="footnum" href="#fnr.4">4</a></sup> <div class="footpara"><p class="footpara">
<a href="static/style.css"><code>static/style.css</code></a>
</p></div></div>

<div class="footdef"><sup><a id="fn.5" class="footnum" href="#fnr.5">5</a></sup> <div class="footpara"><p class="footpara">
<a href="http://tachyons.io/">Tachyons homepage</a>
</p></div></div>

<div class="footdef"><sup><a id="fn.6" class="footnum" href="#fnr.6">6</a></sup> <div class="footpara"><p class="footpara">
<a href="https://getbootstrap.com/">Bootstrap framework homepage</a>
</p></div></div>

<div class="footdef"><sup><a id="fn.7" class="footnum" href="#fnr.7">7</a></sup> <div class="footpara"><p class="footpara">
<a href="https://caddyserver.com/">Caddy webserver homepage</a>
</p></div></div>

<div class="footdef"><sup><a id="fn.8" class="footnum" href="#fnr.8">8</a></sup> <div class="footpara"><p class="footpara">
<a href="https://docs.docker.com/engine/">Docker Engine homepage</a>
</p></div></div>

<div class="footdef"><sup><a id="fn.9" class="footnum" href="#fnr.9">9</a></sup> <div class="footpara"><p class="footpara">
<a href="https://docs.docker.com/compose/overview/"><code>docker-compose</code> homepage</a>
</p></div></div>


</div>
</div><div class="taglist"><a href="tags.html">Tags</a>: <a href="tag-computing.html">computing</a> </div>]]></description>
  <category><![CDATA[computing]]></category>
  <link>https://blog.winny.tech/2019-01-11-publishing-with-org-static-blog.html</link>
  <pubDate>Fri, 11 Jan 2019 16:00:00 -0600</pubDate>
</item>
<item>
  <title><![CDATA[Toggle Redshift with Keyboard Shortcut]]></title>
  <description><![CDATA[
<p>
Redshift is a screen-tinting program that achieves similar goals to
the popular f.lux<sup><a id="fnr.1" class="footref" href="#fn.1">1</a></sup> program.
</p>

<p>
I perused through the redshift man-pages and noticed there is no
documented way to toggle redshift. Of course one can click the
notification area icon when using redshift-gtk or <code>SIGTERM</code> the
redshift process, but neither is very user friendly. (The mouse is not
user friendly.) After some awkward DuckDuckGo-ing and Googling I found
an obvious solution on the redshift homepage<sup><a id="fnr.2" class="footref" href="#fn.2">2</a></sup>: simply send <code>SIGUSR1</code> to
the redshift or redshift-gtk process. When using redshift-gtk, one can
choose to send <code>SIGUSR1</code> to either redshift or redshift-gtk.
</p>

<p>
This is the script I came up with:
</p>

<div class="org-src-container">
<pre class="src src-sh"><span style="color: #8B8989; font-style: italic;">#</span><span style="color: #8B8989; font-style: italic;">!/bin/</span><span style="color: #4c83ff;">sh</span>
<span style="color: #4c83ff;">set</span> -eu
<span style="color: #4c83ff;">if</span> ! pkill -x -SIGUSR1 redshift; <span style="color: #4c83ff;">then</span>
    <span style="color: #4c83ff;">echo</span> <span style="color: #61CE3C;">'Could not find redshift process to toggle.'</span> &gt;&amp;2
    <span style="color: #4c83ff;">exit</span> 1
<span style="color: #4c83ff;">fi</span>
</pre>
</div>

<p>
After installing the script into my system's <code>PATH</code>, now all I have to
do is add a line to my Xbindkeys<sup><a id="fnr.3" class="footref" href="#fn.3">3</a></sup> configuration file (<code>~/.xbindkeysrc.scm</code>) such as:
</p>

<div class="org-src-container">
<pre class="src src-scheme">(xbindkey '(Mod4 F2) <span style="color: #61CE3C;">"toggle-redshift"</span>)
</pre>
</div>

<p>
Now I can type <code>Mod4-F2</code> and toggle Redshift.
</p>
<div id="footnotes">
<h2 class="footnotes">Footnotes: </h2>
<div id="text-footnotes">

<div class="footdef"><sup><a id="fn.1" class="footnum" href="#fnr.1">1</a></sup> <div class="footpara"><p class="footpara">
<a href="https://justgetflux.com/">f.lux homepage</a>
</p></div></div>

<div class="footdef"><sup><a id="fn.2" class="footnum" href="#fnr.2">2</a></sup> <div class="footpara"><p class="footpara">
<a href="http://jonls.dk/redshift/#configuration-options">Redshift homepage Â§ Configuration Options</a>
</p></div></div>

<div class="footdef"><sup><a id="fn.3" class="footnum" href="#fnr.3">3</a></sup> <div class="footpara"><p class="footpara">
<a href="http://www.nongnu.org/xbindkeys/xbindkeys.html">XBindKeys homepage</a>
</p></div></div>


</div>
</div><div class="taglist"><a href="tags.html">Tags</a>: <a href="tag-productivity.html">productivity</a> <a href="tag-computing.html">computing</a> </div>]]></description>
  <category><![CDATA[productivity]]></category>
  <category><![CDATA[computing]]></category>
  <link>https://blog.winny.tech/2019-01-09-toggle-redshift-with-keyboard-shortcut.html</link>
  <pubDate>Wed, 09 Jan 2019 08:04:00 -0600</pubDate>
</item>
</channel>
</rss>
